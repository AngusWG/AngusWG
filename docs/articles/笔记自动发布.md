---
title: 笔记自动发布
date: 2022-04-17 23:14:35
tags:
  - 
categories:
  - 
publish: true
---

# 笔记自动发布

github action 触发

- [x] 下载博客项目 切换分支 dev_auto
  - git clone https://github.com/AngusWG/AngusWG.git
  - it checkout dev_auto
- 强制复制当前有 tag - publis 的文章到 博客项目
  - 对比原有项目的更新时间
  - 检测文章里是否使用了图片
  - 复制图片到博客项目下
  - 复制文章到博客项目下
  - python sync_files
- [x] 生成指向master分支的pr

更改为识别 publish: true 的文章发布

``` yaml
name: Update AUTHORS
on:
  push:
    branches:
      - dev_auto
jobs:
  updateAuthors:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - name: Update AUTHORS
        run: |
          git log --format='%aN <%aE>%n%cN <%cE>' | sort -u > AUTHORS
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v4
        with:
          commit-message: update authors
          title: Update AUTHORS
          body: Credit new contributors by updatingAUTHORS
          branch: update-authors
```
